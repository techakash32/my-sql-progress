=====================================================================
üìå SQL WINDOW FUNCTIONS (NOTES + EXAMPLES)
=====================================================================

WINDOW FUNCTIONS perform calculations **across a set of rows**
related to the current row **without collapsing rows**.

‚úî Unlike GROUP BY, rows are NOT grouped into one row  
‚úî Used for ranking, running totals, comparisons  

====================================================================
BASIC SYNTAX
--------------------------------------------------------------------
function_name() OVER (
  PARTITION BY column
  ORDER BY column
)
====================================================================


====================================================================
# 1Ô∏è‚É£ ROW_NUMBER()
====================================================================

------------------------------------------------------------
üîπ ROW_NUMBER()
------------------------------------------------------------
DEFINITION:
Assigns a **unique number** to each row.

RULES:
‚úî No duplicate numbers  
‚úî Order matters  

EXAMPLE:
--------------------------------------------------------------------
select name, continent, population,
row_number() over (order by population desc) as rn
from world;

------------------------------------------------------------


====================================================================
# 2Ô∏è‚É£ RANK()
====================================================================

------------------------------------------------------------
üîπ RANK()
------------------------------------------------------------
DEFINITION:
Assigns rank with **gaps** for ties.

EXAMPLE:
--------------------------------------------------------------------
select name, population,
rank() over (order by population desc) as rnk
from world;

------------------------------------------------------------


====================================================================
# 3Ô∏è‚É£ DENSE_RANK()
====================================================================

------------------------------------------------------------
üîπ DENSE_RANK()
------------------------------------------------------------
DEFINITION:
Assigns rank **without gaps** for ties.

EXAMPLE:
--------------------------------------------------------------------
select name, population,
dense_rank() over (order by population desc) as drnk
from world;

------------------------------------------------------------


====================================================================
# 4Ô∏è‚É£ PARTITION BY
====================================================================

------------------------------------------------------------
üîπ PARTITION BY
------------------------------------------------------------
DEFINITION:
Divides rows into **groups (windows)**.
Works like GROUP BY but keeps rows separate.

EXAMPLE:
--------------------------------------------------------------------
select name, continent, population,
rank() over (partition by continent order by population desc) as rnk
from world;

------------------------------------------------------------


====================================================================
# 5Ô∏è‚É£ AGGREGATE WINDOW FUNCTIONS
====================================================================

------------------------------------------------------------
üîπ SUM() OVER()
------------------------------------------------------------
DEFINITION:
Calculates running or partitioned sum.

EXAMPLE:
--------------------------------------------------------------------
select name, continent, population,
sum(population) over (partition by continent) as total_pop
from world;

------------------------------------------------------------

------------------------------------------------------------
üîπ AVG() OVER()
------------------------------------------------------------
EXAMPLE:
--------------------------------------------------------------------
select name, continent, population,
avg(population) over (partition by continent) as avg_pop
from world;

------------------------------------------------------------


====================================================================
# 6Ô∏è‚É£ LAG() & LEAD()
====================================================================

------------------------------------------------------------
üîπ LAG()
------------------------------------------------------------
DEFINITION:
Accesses **previous row** value.

EXAMPLE:
--------------------------------------------------------------------
select name, population,
lag(population) over (order by population) as prev_pop
from world;

------------------------------------------------------------

------------------------------------------------------------
üîπ LEAD()
------------------------------------------------------------
DEFINITION:
Accesses **next row** value.

EXAMPLE:
--------------------------------------------------------------------
select name, population,
lead(population) over (order by population) as next_pop
from world;

------------------------------------------------------------


====================================================================
# 7Ô∏è‚É£ FIRST_VALUE() & LAST_VALUE()
====================================================================

------------------------------------------------------------
üîπ FIRST_VALUE()
------------------------------------------------------------
DEFINITION:
Returns first value in window.

------------------------------------------------------------

------------------------------------------------------------
üîπ LAST_VALUE()
------------------------------------------------------------
DEFINITION:
Returns last value in window.

NOTE:
Needs proper frame definition to work correctly.

------------------------------------------------------------


====================================================================
COMPARISON: GROUP BY vs WINDOW FUNCTION
====================================================================

| Feature        | GROUP BY | WINDOW FUNCTION |
|---------------|----------|-----------------|
| Row count     | Reduced  | Same            |
| Aggregation   | Yes      | Yes             |
| Ranking       | No       | Yes             |

====================================================================
INTERVIEW ONE-LINERS
====================================================================

‚úî Window function ‚Üí calculation over rows  
‚úî OVER() defines window  
‚úî PARTITION BY = grouping  
‚úî ORDER BY = order inside window  
‚úî RANK vs DENSE_RANK ‚Üí gap vs no gap  

====================================================================
SUMMARY
====================================================================

‚úî Window functions keep rows intact  
‚úî Used for ranking, running totals  
‚úî Important for analytics & interviews  

‚úî Commonly used:
   ‚Ä¢ ROW_NUMBER
   ‚Ä¢ RANK
   ‚Ä¢ DENSE_RANK
   ‚Ä¢ LAG / LEAD  

END OF NOTES
====================================================================
